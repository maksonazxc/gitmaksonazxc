<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–í—Ö—ñ–¥ ‚Äî Git Hub</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../pages.css">
</head>
<body>
  <section class="page">
    <h2>üîê <span class="accent">–í—Ö—ñ–¥</span> –¥–æ –æ—Å–æ–±–∏—Å—Ç–æ–≥–æ –∫–∞–±—ñ–Ω–µ—Ç—É</h2>
    
    <form id="loginForm" class="form">
      <label>Email<input name="email" type="email" required placeholder="–í–≤–µ–¥—ñ—Ç—å –≤–∞—à email"></label>
      <label>–ü–∞—Ä–æ–ª—å<input name="password" type="password" required placeholder="–í–≤–µ–¥—ñ—Ç—å –≤–∞—à –ø–∞—Ä–æ–ª—å"></label>
      <button type="submit" class="btn">üö™ –£–≤—ñ–π—Ç–∏</button>
    </form>
    
    <p id="loginStatus"></p>
    
    <div style="margin-top: 20px; padding: 15px; background: rgba(138,180,255,0.1); border-radius: 8px; border: 1px solid #8ab4ff;">
      <h3 style="margin: 0 0 10px; color: #8ab4ff;">‚ÑπÔ∏è –©–µ –Ω–µ –º–∞—î—Ç–µ –∞–∫–∞—É–Ω—Ç—É?</h3>
      <p style="margin: 0;">
        <a href="#" onclick="navigateToRegister()" style="color: #8ab4ff; text-decoration: underline;">
          üìù –ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è –∑–∞—Ä–∞–∑
        </a>
      </p>
    </div>

  </section>

  <script>
    (function(){
      const form = document.getElementById('loginForm');
      const status = document.getElementById('loginStatus');
      
      // –°—Ç–≤–æ—Ä—é—î–º–æ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞, —è–∫—â–æ –π–æ–≥–æ –Ω–µ–º–∞—î
      function createTestUser() {
        const users = JSON.parse(localStorage.getItem('gh_users') || '[]');
        const testUser = users.find(u => u.email === 'test@example.com');
        
        if (!testUser) {
          const testUserData = {
            id: 'user_test',
            name: '–¢–µ—Å—Ç–æ–≤–∏–π –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á',
            email: 'test@example.com',
            pwd: '123456',
            msg: '–¢–µ—Å—Ç–æ–≤–∏–π –∞–∫–∞—É–Ω—Ç –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó',
            registeredAt: new Date().toISOString()
          };
          users.push(testUserData);
          localStorage.setItem('gh_users', JSON.stringify(users));
        }
      }
      
      createTestUser();
      
      form.addEventListener('submit', function(e) {
        e.preventDefault();
        const formData = new FormData(form);
        const email = formData.get('email');
        const password = formData.get('password');
        
        // –û—á–∏—â–∞—î–º–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
        status.innerHTML = '';
        
        // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ –¥–∞–Ω—ñ
        if (!email || !password) {
          status.innerHTML = '<span style="color: #ef4444;">‚ö†Ô∏è –ó–∞–ø–æ–≤–Ω—ñ—Ç—å –≤—Å—ñ –ø–æ–ª—è!</span>';
          return;
        }
        
        // –®—É–∫–∞—î–º–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
        const users = JSON.parse(localStorage.getItem('gh_users') || '[]');
        const user = users.find(u => u.email === email && u.pwd === password);
        
        if (user) {
          // –£—Å–ø—ñ—à–Ω–∏–π –≤—Ö—ñ–¥
          localStorage.setItem('currentUser', JSON.stringify(user));
          
          // –û–Ω–æ–≤–ª—é—î–º–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤—Ö–æ–¥—ñ–≤
          const stats = JSON.parse(localStorage.getItem(`userStats_${user.id}`) || '{}');
          stats.lastLogin = new Date().toISOString();
          stats.loginCount = (stats.loginCount || 0) + 1;
          localStorage.setItem(`userStats_${user.id}`, JSON.stringify(stats));
          
          status.innerHTML = '<span style="color: #22c55e;">‚úÖ –í—Ö—ñ–¥ —É—Å–ø—ñ—à–Ω–∏–π! –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—î–º–æ –≤ –æ—Å–æ–±–∏—Å—Ç–∏–π –∫–∞–±—ñ–Ω–µ—Ç...</span>';
          
          // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—î–º–æ –≤ –æ—Å–æ–±–∏—Å—Ç–∏–π –∫–∞–±—ñ–Ω–µ—Ç —á–µ—Ä–µ–∑ 1.5 —Å–µ–∫—É–Ω–¥–∏
          setTimeout(() => {
            window.parent.postMessage({type: 'navigate', page: 'dashboard.html'}, '*');
          }, 1500);
          
        } else {
          // –ù–µ–≤—ñ—Ä–Ω—ñ –¥–∞–Ω—ñ
          status.innerHTML = '<span style="color: #ef4444;">‚ùå –ù–µ–≤—ñ—Ä–Ω–∏–π email –∞–±–æ –ø–∞—Ä–æ–ª—å!</span>';
          
          // –û—á–∏—â–∞—î–º–æ –ø–æ–ª–µ –ø–∞—Ä–æ–ª—é
          form.querySelector('input[name="password"]').value = '';
        }
      });
      
      
      // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥—É –Ω–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—é
      window.navigateToRegister = function() {
        window.parent.postMessage({type: 'navigate', page: 'register.html'}, '*');
      };
      
      // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–∂–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∏–π
      const currentUser = JSON.parse(localStorage.getItem('currentUser') || 'null');
      if (currentUser) {
        status.innerHTML = '<span style="color: #8ab4ff;">‚ÑπÔ∏è –í–∏ –≤–∂–µ —É–≤—ñ–π—à–ª–∏ –≤ —Å–∏—Å—Ç–µ–º—É —è–∫ <strong>' + currentUser.name + '</strong></span>';
        setTimeout(() => {
          window.parent.postMessage({type: 'navigate', page: 'dashboard.html'}, '*');
        }, 2000);
      }
    })();
  </script>
</body>
</html>
